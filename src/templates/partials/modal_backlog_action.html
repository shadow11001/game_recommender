<div class="modal-header">
    <h5 class="modal-title">
        {% if action == 'played' %}Mark as Played{% else %}Dismiss{% endif %}: {{ game_title }}
    </h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
    <form hx-post="/api/game/backlog_update"
          hx-target="#backlog-container" 
          hx-swap="innerHTML"
          onsubmit="bootstrap.Modal.getInstance(document.getElementById('globalModal')).hide()">
        
        <input type="hidden" name="library_ids" value="{{ library_ids }}">
        
        {% if action == 'played' %}
            <input type="hidden" name="action" value="played">
            <div class="mb-3">
                <p>Great! How would you rate it?</p>
                <label class="form-label">Rating (1-10) <span class="text-muted">(Optional)</span></label>
                <input type="number" name="rating" min="1" max="10" class="form-control" placeholder="-">
            </div>
        {% else %}
             <input type="hidden" name="action" value="dropped">
             <p>Are you sure you want to dismiss this suggestion?</p>
             <div class="mb-3">
                <label class="form-label">Reason</label>
                <select name="reason" class="form-select">
                    <option value="not_interested">Not Interested</option>
                    <option value="played_elsewhere">Played Elsewhere</option>
                    <option value="will_play_later">Will Play Later</option>
                </select>
             </div>
        {% endif %}

        <div class="d-flex justify-content-end gap-2">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Confirm</button>
        </div>
    </form>
</div>
